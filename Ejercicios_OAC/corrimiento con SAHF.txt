%include "./pc_io.inc" 



section .data
msg: db 'ingrese una cadena : ',0x0
msg2 db 'ingrese el numero de corrimientos: ',0x0
len: equ $- msg

section .bss
cadena resb 50
corry resb 10
cad resb 10

section .text

global _start
_start:

mov edx, msg
call puts

mov edx,cadena

call capturar
call salto

call capturacorrimiento
call salto


call mostrar
call salto



mov eax,1
mov ebx,0
int 80h



capturar: 
    pushad
    mov esi,0

    ciclocap:
        call getche
        cmp esi,8
        je fin1
        mov byte[edx+esi],al
        inc esi
        jmp ciclocap
    fin1 : 
        popad
        ret

capturacorrimiento:pushad
    mov edx,msg2
    call puts
    call getche
    mov byte[corry],al
    popad
    ret
    
corrimiento:pushad
    mov edx,cadena
    mov esi,7
    mov edi,7
    mov cl,byte[corry]              ;cl =2

    ciclocorrimiento:
    
    mov ah,byte[edx+esi]
    sub ah,'0'
    SAHF
    dec edi
    pushad

        ciclocorrimiento2:

        mov al,byte[edx+edi]
        sub al,'0'
        mov byte[edx+esi],al
        dec esi
        dec edi
        cmp edi,-1

        jmp ciclocorrimiento
    popad
    loop ciclocorrimiento

mostrar:pushad
    mov edx,cadena
    mov esi,0
     
    ciclomostrar:
    mov al,byte[edx+esi]
    cmp esi,8
    je fin2
    call putchar
    inc esi
    jmp ciclomostrar

    fin2:
    popad
    ret

    

salto:
    pushad
    mov al,13
    call putchar
    mov al,10
    call putchar
    popad
    ret
